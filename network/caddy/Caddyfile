{
  email mateusz.goral92@gmail.com
  acme_dns cloudflare {env.CF_API_TOKEN}
}

*.mati-lab.online {
  tls {
    dns cloudflare {env.CF_API_TOKEN}
    resolvers 1.1.1.1
  }

  @pihole host pihole.mati-lab.online
  handle @pihole {
    reverse_proxy http://192.168.1.252:8080 {
        header_up Host {host}
        header_up X-Forwarded-Proto https
        header_up X-Forwarded-Ssl on
    }
}

  @proxmox host proxmox.mati-lab.online
  handle @proxmox {
  reverse_proxy 192.168.1.11:8006 {
      transport http {
        tls_insecure_skip_verify
      }
  }
}

  @homebridge host homebridge.mati-lab.online
  handle @homebridge {
    reverse_proxy http://192.168.1.155 {
      header_up Host {host}
      header_up X-Forwarded-Proto https
      header_up X-Forwarded-Ssl on
    }
  }

  @restorate.dev host restorate.dev.mati-lab.online
  handle @restorate.dev {
    reverse_proxy https://192.168.1.173:5173
  }

  handle {
    respond "unknown host" 404
  }
}
